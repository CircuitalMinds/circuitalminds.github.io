---
layout: null
---
[
{%- for v in site.data.videos.metadata %}
    {% assign m = v[1].metadata | where:'name','title' -%}
    {%- if m[0].content == '' -%}    
        {% assign m = v[1].metadata | where:'property','og:title' -%}
    {%- endif -%}    
    {%- if m[0].content == '' -%}
        {% assign title = v[0] | replace:".mp4","" -%}
    {%- else -%}
        {% assign title = m[0].content -%}
    {%- endif -%}
    {% assign img = v[1].metadata | where:'property','og:image' -%}
    {%- if img[0].content == '' -%}
        {% assign img = v[1].metadata | where:'name','twitter:image' -%}
    {%- endif -%}
    {%- if img[0].content == '' -%}
        {% assign img = site.logo -%}
    {%- else -%}
        {% assign img = img[0].content -%}
    {%- endif -%}
    {% assign duration = v[1].metadata | where:'itemprop','duration' -%}
    {% assign duration = duration[0].content | replace:"PT","" | replace:"M",":" | replace:"S",":0" -%}
    {% assign keywords = v[1].metadata | where:'name','keywords' -%}
    {% assign keywords = keywords[0].content -%}
    {
            "index"    : "{{ forloop.index | minus:1 }}",
            "title"    : "{{ title | replace:'.wmv','' | escape }}",
            "url"      : "{{ v[1].url }}",
            "image"    : "{{ img | escape }}",
            "duration" : "{{ duration | escape }}",
            "keywords" : {{ keywords | jsonify }}
    } {%- unless forloop.last %},{% endunless -%}    
{% endfor -%}
]